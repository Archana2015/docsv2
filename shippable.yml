language:
  python

python:
  - '3.4'

branches:
  only:
    - master

env:
  global:
    - AWS_S3_LOCAL_PATH='site'
    - AWS_S3_BUCKET='s3://ship-docsv2'
    - AWS_S3_REGION='Oregon'
    # AWS_ACCESS_KEY_ID
    # AWS_SECRET_ACCESS_KEY
    - secure: wNWyty8ECIpidNT2du03aG1vuhYFpS16/kKe7yTMBaCgfO2P+9h9Rr+POM4+m5Wtkpq+eg84wv4tXRR16M5+CLhBa4srgTdHKj5L+9YacWSS/SltjLS2mMY8l3/2Z7nRbV6LSQ28U15SH8OMUASM/ZtKNcTSnR6QuZEYYXw4gcjRW7mBClLMh6hlv05qCKDFA92K09fnO1espSs9Ln9DAk4DfOxfgfxX+si8fPzC4F6RgNIiigRCwREsdhvO+uRiKDaYY0rjnckGWR8ENyNckCoOeviIlTxoB7Uxy9ui1cfhnTJg2UFZROqLOOYJ0+h6qsAPZRhMCfpKrMIwLImlwA==
    
install:
  - pip install -r requirements.txt

script:
  - mkdocs build

after_success:
  - aws s3 sync $AWS_S3_LOCAL_PATH $AWS_S3_BUCKET --delete --acl public-read --region $AWS_S3_REGION

notifications:
  email:
    recipients:
      - roll@respect31.com
    on_success: change
    on_failure: always
